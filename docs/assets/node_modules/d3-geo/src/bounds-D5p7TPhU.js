import{areaStream as C,areaRingSum as K}from"./area-EjZICamb.js";import{cartesianCross as B,cartesianNormalizeInPlace as O,spherical as Q,cartesian as T}from"./cartesian-0PBFRGIL.js";import{abs as A,epsilon as D,degrees as w,radians as M}from"./math-yk45OU_y.js";import U from"./stream-bBKWqq4p.js";import{Adder as V}from"../../d3-array/src/fsum-Cuuw102x.js";var t,i,o,c,E,F,G,R,l,y,p,g={point:z,lineStart:j,lineEnd:k,polygonStart:function(){g.point=J,g.lineStart=W,g.lineEnd=X,l=new V,C.polygonStart()},polygonEnd:function(){C.polygonEnd(),g.point=z,g.lineStart=j,g.lineEnd=k,K<0?(t=-(o=180),i=-(c=90)):l>D?c=90:l<-1e-6&&(i=-90),p[0]=t,p[1]=o},sphere:function(){t=-(o=180),i=-(c=90)}};function z(n,e){y.push(p=[t=n,o=n]),e<i&&(i=e),e>c&&(c=e)}function H(n,e){var u=T([n*M,e*M]);if(R){var f=B(R,u),r=[f[1],-f[0],0],S=B(r,f);O(S),S=Q(S);var v=n-E,N=v>0?1:-1,I=S[0]*w*N,P,L=A(v)>180;L^(N*E<I&&I<N*n)?(P=S[1]*w,P>c&&(c=P)):(I=(I+360)%360-180,L^(N*E<I&&I<N*n)?(P=-S[1]*w,P<i&&(i=P)):(e<i&&(i=e),e>c&&(c=e))),L?n<E?s(t,n)>s(t,o)&&(o=n):s(n,o)>s(t,o)&&(t=n):o>=t?(n<t&&(t=n),n>o&&(o=n)):n>E?s(t,n)>s(t,o)&&(o=n):s(n,o)>s(t,o)&&(t=n)}else y.push(p=[t=n,o=n]);e<i&&(i=e),e>c&&(c=e),R=u,E=n}function j(){g.point=H}function k(){p[0]=t,p[1]=o,g.point=z,R=null}function J(n,e){if(R){var u=n-E;l.add(A(u)>180?u+(u>0?360:-360):u)}else F=n,G=e;C.point(n,e),H(n,e)}function W(){C.lineStart()}function X(){J(F,G),C.lineEnd(),A(l)>D&&(t=-(o=180)),p[0]=t,p[1]=o,R=null}function s(n,e){return(e-=n)<0?e+360:e}function Y(n,e){return n[0]-e[0]}function q(n,e){return n[0]<=n[1]?n[0]<=e&&e<=n[1]:e<n[0]||n[1]<e}function h(n){var e,u,f,r,S,v,N;if(c=o=-(t=i=1/0),y=[],U(n,g),u=y.length){for(y.sort(Y),e=1,f=y[0],S=[f];e<u;++e)r=y[e],q(f,r[0])||q(f,r[1])?(s(f[0],r[1])>s(f[0],f[1])&&(f[1]=r[1]),s(r[0],f[1])>s(f[0],f[1])&&(f[0]=r[0])):S.push(f=r);for(v=-1/0,u=S.length-1,e=0,f=S[u];e<=u;f=r,++e)r=S[e],(N=s(f[1],r[0]))>v&&(v=N,t=r[0],o=f[1])}return y=p=null,t===1/0||i===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,i],[o,c]]}export{h as default};
