import X from"../clip/antimeridian-BV-oPWyA.js";import J from"../clip/circle-au_sIxeN.js";import K from"../clip/rectangle-C5j5cyUy.js";import Y from"../compose-DSy6lhuy.js";import w from"../identity-BeFVCKXK.js";import{degrees as g,radians as l,sqrt as N,cos as O,sin as Q}from"../math-yk45OU_y.js";import{rotateRadians as U}from"../rotation-VxZSMODn.js";import{transformer as F}from"../transform-PirWJwo9.js";import{fitExtent as V,fitSize as Z,fitWidth as $,fitHeight as x}from"./fit-CPCBhCLQ.js";import B from"./resample-CcU7ffsV.js";var y=F({point:function(r,e){this.stream.point(r*l,e*l)}});function k(r){return F({point:function(e,i){var u=r(e,i);return this.stream.point(u[0],u[1])}})}function _(r,e,i,u,m){function s(o,a){return o*=u,a*=m,[e+r*o,i-r*a]}return s.invert=function(o,a){return[(o-e)/r*u,(i-a)/r*m]},s}function D(r,e,i,u,m,s){if(!s)return _(r,e,i,u,m);var o=O(s),a=Q(s),j=o*r,R=a*r,b=o/r,v=a/r,A=(a*i-o*e)/r,T=(a*e+o*i)/r;function d(f,c){return f*=u,c*=m,[j*f-R*c+e,i-R*f-j*c]}return d.invert=function(f,c){return[u*(b*f-v*c+A),m*(T-v*f-b*c)]},d}function mt(r){return tt(function(){return r})()}function tt(r){var e,i=150,u=480,m=250,s=0,o=0,a=0,j=0,R=0,b,v=0,A=1,T=1,d=null,f=X,c=null,S,z,H,W=w,G=.5,L,q,M,C,P;function n(t){return M(t[0]*l,t[1]*l)}function I(t){return t=M.invert(t[0],t[1]),t&&[t[0]*g,t[1]*g]}n.stream=function(t){return C&&P===t?C:C=y(k(b)(f(L(W(P=t)))))},n.preclip=function(t){return arguments.length?(f=t,d=void 0,E()):f},n.postclip=function(t){return arguments.length?(W=t,c=S=z=H=null,E()):W},n.clipAngle=function(t){return arguments.length?(f=+t?J(d=t*l):(d=null,X),E()):d*g},n.clipExtent=function(t){return arguments.length?(W=t==null?(c=S=z=H=null,w):K(c=+t[0][0],S=+t[0][1],z=+t[1][0],H=+t[1][1]),E()):c==null?null:[[c,S],[z,H]]},n.scale=function(t){return arguments.length?(i=+t,h()):i},n.translate=function(t){return arguments.length?(u=+t[0],m=+t[1],h()):[u,m]},n.center=function(t){return arguments.length?(s=t[0]%360*l,o=t[1]%360*l,h()):[s*g,o*g]},n.rotate=function(t){return arguments.length?(a=t[0]%360*l,j=t[1]%360*l,R=t.length>2?t[2]%360*l:0,h()):[a*g,j*g,R*g]},n.angle=function(t){return arguments.length?(v=t%360*l,h()):v*g},n.reflectX=function(t){return arguments.length?(A=t?-1:1,h()):A<0},n.reflectY=function(t){return arguments.length?(T=t?-1:1,h()):T<0},n.precision=function(t){return arguments.length?(L=B(q,G=t*t),E()):N(G)},n.fitExtent=function(t,p){return V(n,t,p)},n.fitSize=function(t,p){return Z(n,t,p)},n.fitWidth=function(t,p){return $(n,t,p)},n.fitHeight=function(t,p){return x(n,t,p)};function h(){var t=D(i,0,0,A,T,v).apply(null,e(s,o)),p=D(i,u-t[0],m-t[1],A,T,v);return b=U(a,j,R),q=Y(e,p),M=Y(b,q),L=B(q,G),E()}function E(){return C=P=null,n}return function(){return e=r.apply(this,arguments),n.invert=e.invert&&I,h()}}export{mt as default,tt as projectionMutator};
