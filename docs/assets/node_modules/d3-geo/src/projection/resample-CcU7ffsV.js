import{cartesian as I}from"../cartesian-0PBFRGIL.js";import{atan2 as J,asin as K,abs as A,sqrt as O,cos as Q,radians as R,epsilon as G}from"../math-yk45OU_y.js";import{transformer as U}from"../transform-PirWJwo9.js";var H=16,V=Q(30*R);function h(u,t){return+t?X(u,t):W(u)}function W(u){return U({point:function(t,D){t=u(t,D),this.stream.point(t[0],t[1])}})}function X(u,t){function D(i,P,q,L,M,T,k,$,r,e,l,c,s,n){var g=k-i,S=$-P,a=g*g+S*S;if(a>4*t&&s--){var p=L+e,v=M+l,E=T+c,w=O(p*p+v*v+E*E),o=K(E/=w),f=A(A(E)-1)<G||A(q-r)<G?(q+r)/2:J(v,p),d=u(f,o),N=d[0],y=d[1],B=N-i,C=y-P,F=S*B-g*C;(F*F/a>t||A((g*B+S*C)/a-.5)>.3||L*e+M*l+T*c<V)&&(D(i,P,q,L,M,T,N,y,f,p/=w,v/=w,E,s,n),n.point(N,y),D(N,y,f,p,v,E,k,$,r,e,l,c,s,n))}}return function(i){var P,q,L,M,T,k,$,r,e,l,c,s,n={point:g,lineStart:S,lineEnd:p,polygonStart:function(){i.polygonStart(),n.lineStart=v},polygonEnd:function(){i.polygonEnd(),n.lineStart=S}};function g(o,f){o=u(o,f),i.point(o[0],o[1])}function S(){r=NaN,n.point=a,i.lineStart()}function a(o,f){var d=I([o,f]),N=u(o,f);D(r,e,$,l,c,s,r=N[0],e=N[1],$=o,l=d[0],c=d[1],s=d[2],H,i),i.point(r,e)}function p(){n.point=g,i.lineEnd()}function v(){S(),n.point=E,n.lineEnd=w}function E(o,f){a(P=o,f),q=r,L=e,M=l,T=c,k=s,n.point=a}function w(){D(r,e,$,l,c,s,q,L,P,M,T,k,H,i),n.lineEnd=p,p()}return n}}export{h as default};
