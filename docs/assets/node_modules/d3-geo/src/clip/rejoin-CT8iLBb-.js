import a from"../pointEqual-C9HG-HUx.js";import{epsilon as A}from"../math-yk45OU_y.js";function g(f,v,p,n){this.x=f,this.z=v,this.o=p,this.e=n,this.v=!1,this.n=this.p=null}function D(f,v,p,n,o){var z=[],w=[],l,d;if(f.forEach(function(t){if(!((k=t.length-1)<=0)){var k,x=t[0],E=t[k],s;if(a(x,E)){if(!x[2]&&!E[2]){for(o.lineStart(),l=0;l<k;++l)o.point((x=t[l])[0],x[1]);o.lineEnd();return}E[0]+=2*A}z.push(s=new g(x,t,null,!0)),w.push(s.o=new g(x,null,s,!1)),z.push(s=new g(E,t,null,!1)),w.push(s.o=new g(E,null,s,!0))}}),!!z.length){for(w.sort(v),R(z),R(w),l=0,d=w.length;l<d;++l)w[l].e=p=!p;for(var q=z[0],h,e;;){for(var i=q,u=!0;i.v;)if((i=i.n)===q)return;h=i.z,o.lineStart();do{if(i.v=i.o.v=!0,i.e){if(u)for(l=0,d=h.length;l<d;++l)o.point((e=h[l])[0],e[1]);else n(i.x,i.n.x,1,o);i=i.n}else{if(u)for(h=i.p.z,l=h.length-1;l>=0;--l)o.point((e=h[l])[0],e[1]);else n(i.x,i.p.x,-1,o);i=i.p}i=i.o,h=i.z,u=!u}while(!i.v);o.lineEnd()}}}function R(f){if(v=f.length){for(var v,p=0,n=f[0],o;++p<v;)n.n=o=f[p],o.p=n,n=o;n.n=o=f[0],o.p=n}}export{D as default};
