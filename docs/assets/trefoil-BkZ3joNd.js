const a=document.getElementById("canvas"),o=a.getContext("2d"),f=1e3,h=[];let d=0;for(let e=0;e<f;e++){const t=e/f*Math.PI*2,i=Math.sin(t)+2*Math.sin(2*t),c=Math.cos(t)-2*Math.cos(2*t),s=-Math.sin(3*t);h.push({x:i,y:c,z:s});const n=Math.hypot(i,c);n>d&&(d=n)}const r=20,j=r/(r-1);let v=0,w=0,C=0,g=1;function k(){a.width=300,a.height=300,g=(Math.min(a.width,a.height)/2-10)/(d*j)}k();function F(e,t,i,c){let{x:s,y:n,z:l}=e,u=Math.cos(t),M=Math.sin(t),S=n*u-l*M,b=n*M+l*u;n=S,l=b;let m=Math.cos(i),x=Math.sin(i),P=s*m+l*x,X=-s*x+l*m;s=P,l=X;let y=Math.cos(c),p=Math.sin(c),Y=s*y-n*p,Z=s*p+n*y;return{x:Y,y:Z,z:l}}function I(e){const t=r/(r-e.z);return{x:e.x*t,y:e.y*t}}function z(){o.clearRect(0,0,a.width,a.height);const e=o.createLinearGradient(20,0,220,0);e.addColorStop("0","red"),e.addColorStop("0.5","blue"),e.addColorStop("1.0","green"),o.strokeStyle=e,o.lineWidth=1,o.lineCap="round",o.lineJoin="round",o.beginPath();for(let t=0;t<h.length;t++){const i=F(h[t],v,w,C),c=I(i),s=c.x*g+a.width/2,n=c.y*g+a.height/2;t===0?o.moveTo(s,n):o.lineTo(s,n)}o.closePath(),o.stroke(),v+=.01,w+=.01,C+=.01,requestAnimationFrame(z)}z();
